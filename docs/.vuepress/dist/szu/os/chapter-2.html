<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.1 进程的描述 | R</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="https://xunyhu.github.io/image/favicon.ico">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.1a8e0fbc.css" as="style"><link rel="preload" href="/assets/js/app.3b4388ed.js" as="script"><link rel="preload" href="/assets/js/2.10b3e4ea.js" as="script"><link rel="preload" href="/assets/js/55.4b34c753.js" as="script"><link rel="prefetch" href="/assets/js/10.d5aef7bd.js"><link rel="prefetch" href="/assets/js/11.bb90b8c9.js"><link rel="prefetch" href="/assets/js/12.6cfcf9c3.js"><link rel="prefetch" href="/assets/js/13.2d9ed724.js"><link rel="prefetch" href="/assets/js/14.9c217a9e.js"><link rel="prefetch" href="/assets/js/15.70a3c708.js"><link rel="prefetch" href="/assets/js/16.be337503.js"><link rel="prefetch" href="/assets/js/17.88c2ce55.js"><link rel="prefetch" href="/assets/js/18.4a06556f.js"><link rel="prefetch" href="/assets/js/19.81a2041b.js"><link rel="prefetch" href="/assets/js/20.be789981.js"><link rel="prefetch" href="/assets/js/21.825d0143.js"><link rel="prefetch" href="/assets/js/22.e6efa1d3.js"><link rel="prefetch" href="/assets/js/23.dd7746f1.js"><link rel="prefetch" href="/assets/js/24.85415efa.js"><link rel="prefetch" href="/assets/js/25.21ab202f.js"><link rel="prefetch" href="/assets/js/26.de7afa6a.js"><link rel="prefetch" href="/assets/js/27.a9f64598.js"><link rel="prefetch" href="/assets/js/28.3fcaa6f2.js"><link rel="prefetch" href="/assets/js/29.35702d9b.js"><link rel="prefetch" href="/assets/js/3.d3d6240c.js"><link rel="prefetch" href="/assets/js/30.5d380278.js"><link rel="prefetch" href="/assets/js/31.458edbca.js"><link rel="prefetch" href="/assets/js/32.cbce3cde.js"><link rel="prefetch" href="/assets/js/33.b9019a77.js"><link rel="prefetch" href="/assets/js/34.17cfd457.js"><link rel="prefetch" href="/assets/js/35.7fb8274c.js"><link rel="prefetch" href="/assets/js/36.2e3a3866.js"><link rel="prefetch" href="/assets/js/37.2c161539.js"><link rel="prefetch" href="/assets/js/38.38a8b365.js"><link rel="prefetch" href="/assets/js/39.3be76881.js"><link rel="prefetch" href="/assets/js/4.0f570684.js"><link rel="prefetch" href="/assets/js/40.7dc697fb.js"><link rel="prefetch" href="/assets/js/41.a5ccdda3.js"><link rel="prefetch" href="/assets/js/42.ca5b907b.js"><link rel="prefetch" href="/assets/js/43.23621d4f.js"><link rel="prefetch" href="/assets/js/44.a6f2fefe.js"><link rel="prefetch" href="/assets/js/45.2dc33749.js"><link rel="prefetch" href="/assets/js/46.c7101c66.js"><link rel="prefetch" href="/assets/js/47.d24c7011.js"><link rel="prefetch" href="/assets/js/48.b84c555f.js"><link rel="prefetch" href="/assets/js/49.fa4326aa.js"><link rel="prefetch" href="/assets/js/5.734ae6af.js"><link rel="prefetch" href="/assets/js/50.290b69d5.js"><link rel="prefetch" href="/assets/js/51.1d05fccf.js"><link rel="prefetch" href="/assets/js/52.9f9563ae.js"><link rel="prefetch" href="/assets/js/53.31b84813.js"><link rel="prefetch" href="/assets/js/54.6ea1177f.js"><link rel="prefetch" href="/assets/js/56.1af848c0.js"><link rel="prefetch" href="/assets/js/57.7f5ccefc.js"><link rel="prefetch" href="/assets/js/58.0b7e93b1.js"><link rel="prefetch" href="/assets/js/59.1b598669.js"><link rel="prefetch" href="/assets/js/6.814edb6d.js"><link rel="prefetch" href="/assets/js/60.3c263ff3.js"><link rel="prefetch" href="/assets/js/61.dbab0bee.js"><link rel="prefetch" href="/assets/js/62.fc9ffb8c.js"><link rel="prefetch" href="/assets/js/7.3852f5ef.js"><link rel="prefetch" href="/assets/js/8.a3583ec9.js"><link rel="prefetch" href="/assets/js/9.d6d7619e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1a8e0fbc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">R</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="深大自考" class="dropdown-title"><span class="title">深大自考</span> <span class="arrow down"></span></button> <button type="button" aria-label="深大自考" class="mobile-dropdown-title"><span class="title">深大自考</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/szu/pest3/" class="nav-link">
  PEST-3
</a></li><li class="dropdown-item"><!----> <a href="/szu/c++/" class="nav-link">
  C++程序设计
</a></li><li class="dropdown-item"><!----> <a href="/szu/structure/" class="nav-link">
  数据结构导论
</a></li><li class="dropdown-item"><!----> <a href="/szu/os/" class="nav-link router-link-active">
  操作系统概论
</a></li><li class="dropdown-item"><!----> <a href="/szu/software/" class="nav-link">
  软件开发工具
</a></li><li class="dropdown-item"><!----> <a href="/szu/database/" class="nav-link">
  数据库系统原理
</a></li><li class="dropdown-item"><!----> <a href="/szu/network/" class="nav-link">
  计算机网络原理
</a></li><li class="dropdown-item"><!----> <a href="/szu/history/" class="nav-link">
  中国近现代史纲要
</a></li><li class="dropdown-item"><!----> <a href="/szu/marx/" class="nav-link">
  马克思主义基本原理概论
</a></li><li class="dropdown-item"><!----> <a href="/szu/business/" class="nav-link">
  网络经济与企业管理
</a></li></ul></div></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="深大自考" class="dropdown-title"><span class="title">深大自考</span> <span class="arrow down"></span></button> <button type="button" aria-label="深大自考" class="mobile-dropdown-title"><span class="title">深大自考</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/szu/pest3/" class="nav-link">
  PEST-3
</a></li><li class="dropdown-item"><!----> <a href="/szu/c++/" class="nav-link">
  C++程序设计
</a></li><li class="dropdown-item"><!----> <a href="/szu/structure/" class="nav-link">
  数据结构导论
</a></li><li class="dropdown-item"><!----> <a href="/szu/os/" class="nav-link router-link-active">
  操作系统概论
</a></li><li class="dropdown-item"><!----> <a href="/szu/software/" class="nav-link">
  软件开发工具
</a></li><li class="dropdown-item"><!----> <a href="/szu/database/" class="nav-link">
  数据库系统原理
</a></li><li class="dropdown-item"><!----> <a href="/szu/network/" class="nav-link">
  计算机网络原理
</a></li><li class="dropdown-item"><!----> <a href="/szu/history/" class="nav-link">
  中国近现代史纲要
</a></li><li class="dropdown-item"><!----> <a href="/szu/marx/" class="nav-link">
  马克思主义基本原理概论
</a></li><li class="dropdown-item"><!----> <a href="/szu/business/" class="nav-link">
  网络经济与企业管理
</a></li></ul></div></div><div class="nav-item"><a href="https://v1.vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>《操作系统概论》</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/szu/os/" aria-current="page" class="sidebar-link">课程简介</a></li><li><a href="/szu/os/chapter-1.html" class="sidebar-link">第1章 操作系统简介</a></li><li><a href="/szu/os/chapter-2.html" aria-current="page" class="active sidebar-link">第2章 进程管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/szu/os/chapter-2.html#_2-1-进程的描述" class="sidebar-link">2.1 进程的描述</a></li><li class="sidebar-sub-header"><a href="/szu/os/chapter-2.html#_2-2-进程的控制" class="sidebar-link">2.2 进程的控制</a></li><li class="sidebar-sub-header"><a href="/szu/os/chapter-2.html#_2-3-操作系统内核" class="sidebar-link">2.3 操作系统内核</a></li><li class="sidebar-sub-header"><a href="/szu/os/chapter-2.html#_2-4-进程同步" class="sidebar-link">2.4 进程同步</a></li><li class="sidebar-sub-header"><a href="/szu/os/chapter-2.html#_2-5-进程通信" class="sidebar-link">2.5 进程通信</a></li><li class="sidebar-sub-header"><a href="/szu/os/chapter-2.html#_2-6-线程" class="sidebar-link">2.6 线程</a></li><li class="sidebar-sub-header"><a href="/szu/os/chapter-2.html#思考与练习题" class="sidebar-link">思考与练习题</a></li><li class="sidebar-sub-header"><a href="/szu/os/chapter-2.html#百日题库-简答题" class="sidebar-link">百日题库-简答题</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_2-1-进程的描述"><a href="#_2-1-进程的描述" class="header-anchor">#</a> 2.1 进程的描述</h2> <ol><li><p>程序的并发执行</p> <ul><li>1.程序的顺序执行
<ul><li>特点：1.顺序性：下一步操作要等待前一操作结束；2.封闭性：执行独占资源，不受外界影响；3.可再现性：重复执行将获得相同结果。</li></ul></li> <li>2.程序的并发执行
<ul><li>含义：程序并发执行是指在同一时间间隔内运行多个程序，一个程序执行结束之前，可以运行其他程序。</li> <li>特点：1.间断性；2.失去封闭性；3.不可再现性</li></ul></li></ul></li> <li><p>进程的概念</p> <ul><li><p>1.<strong>进程的定义</strong></p> <ul><li>定义 1：进程是允许并发执行的程序在某个数据集合上的<code>运行过程</code></li> <li>定义 2：进程是由<code>正文段</code>、<code>用户数据段</code>及<code>进程控制块</code>共同组成的<strong>执行环境</strong> <ul><li>正文段：描述进程要完成的功能，存放机器指令</li> <li>数据段：进程执行时直接进行操作的用户数据</li> <li>进程控制块 PCB：存放程序的运行环境</li></ul></li></ul></li> <li><p>2.<strong>进程的特征</strong></p> <ul><li>1）并发；2）动态；3）独立；4）异步；5）结构特征
<ul><li>并发：多个进程同时执行，现代操作系统的重要特征</li> <li>动态性：进程实体的执行过程，创建——执行——消亡</li> <li>独立性：资源独立，互不干扰</li> <li>异步性：速度不可预知，执行随机</li> <li>结构特征：进程由正文段、用户数据段、进程控制块组成</li></ul></li></ul></li> <li><p>3.进程与程序的比较</p> <ul><li>含义：进程是程序的一次执行，进程总是对应至少一个特定的程序，执行程序的代码。</li> <li>进程与程序的比较
<ul><li>进程是动态的，程序是静态的</li> <li>进程是暂时，程序是永久</li> <li>存在实体不同，程序是指令集合，进程由正文段+数据段+PCB 组成</li></ul></li> <li>进程与程序的联系
<ul><li>进程是程序的一次执行</li> <li>一个程序可以对应多个进程（一个程序对应不同数据集合运行多个进程；多个进程并发执行同一个程序代码）</li></ul></li></ul></li></ul></li> <li><p>进程控制块（PCB）</p> <ul><li><p>1.什么是进程控制块</p> <ul><li>进程控制块是进程实体的一部分，是操作系统中最重要的<code>数据结构</code>。进程控制块中记录了操作系统所需要的、用于描述进程情况及控制进程运行所需的全部信息。
<ul><li>每个进程有唯一 PCB</li> <li>PCB 是进程存在的唯一标志</li> <li>OS 通过 PCB 控制和管理进程</li> <li>OS 通过 PCB 感知进程的存在</li></ul></li></ul></li> <li><p>2.进程控制块中的信息</p> <ul><li>1）进程标识符信息；2）处理机状态信息；3）进程调度信息；4）进程控制信息
<ul><li>进程标识符 PID：唯一标识一个进程</li> <li>处理机状态信息：处理机内各种寄存器的内容
<ul><li>通用寄存器，用户程序访问的寄存器</li> <li>PC，指令计数器</li> <li>PSW，程序状态字</li> <li>用户栈指针，用户进程相关的系统栈</li></ul></li> <li>进程调度信息：进程状态、优先级、调度等信息</li> <li>进程控制信息：进程资源信息
<ul><li>程序和数据地址、进程同步和通信机制、资源清单、链接指针</li></ul></li></ul></li></ul></li></ul></li> <li><p><strong>进程的状态</strong></p> <ul><li><p>1.进程的 3 种基本状态</p> <ul><li>就绪态：已经获得 CPU 以外所有资源，处于就绪队列</li> <li>执行态：获得 CPU，处于执行过程</li> <li>阻塞态：发生某种事件暂时无法进行，放弃 CPU 处于暂停状态，如请求 I/O，请求缓冲空间，处于阻塞队列</li></ul></li> <li><p>2.进程状态的转换</p> <ul><li>就绪态————&gt;执行态，调度操作</li> <li>执行态————&gt;就绪态，时间片机制</li> <li>执行态————&gt;阻塞态，阻塞操作</li> <li>阻塞态————&gt;就绪态，唤醒操作</li> <li>唤醒过程：进程状态由阻塞态变为就绪态的过程</li> <li>阻塞过程：由执行态变为阻塞态的过程</li></ul></li> <li><p>3.Linux 的进程状态</p></li></ul></li> <li><p>进程的组织方式</p> <ul><li>1.链接方式</li> <li>2.索引方式</li> <li>3.进程队列</li></ul></li></ol> <h2 id="_2-2-进程的控制"><a href="#_2-2-进程的控制" class="header-anchor">#</a> 2.2 进程的控制</h2> <ol><li><p>进程的创建</p> <ul><li>创建新进程包括为进程分配必要的资源，建立操作系统用于管理进程的数据结构等操作。</li> <li>进程创建的起因
<ul><li>用户登录：winlogon</li> <li>作业调度</li> <li>提供服务</li> <li>应用请求：Unix 的 fork()，Win 的 CreatProcess()</li></ul></li> <li>进程创建的步骤
<ul><li>1）申请空白 PCB</li> <li><ol start="2"><li>为新进程分配资源</li></ol></li> <li><ol start="3"><li>初始化进程控制块</li></ol></li> <li>4）将新进程插入就绪队列</li></ul></li> <li>进程创建的关系
<ul><li>父进程：由系统或用户首先创建的进程</li> <li>子进程：父进程创建的进程</li> <li>父子进程关系：
<ul><li>进程控制：子进程由父进程创建或撤销，子进程不能控制父进程</li> <li>资源继承：子进程可以全部或部分共享父进程的资源</li> <li>运行方式：可同时进行，可以控制先后</li> <li>数据结构：在 PCB 中设置家族关系表项，标明自己的父进程和子进程。</li></ul></li></ul></li> <li>进程相关的系统命令
<ul><li>Windows
<ul><li>TASKLIST， tasklisk - svc，tasklist -n</li> <li>TSKILL</li> <li>NTSD -c q -p PID</li></ul></li> <li>Linux
<ul><li>程序使用 fork()函数创建进程</li> <li>系统调用是 clone 和 vfork</li></ul></li></ul></li></ul></li> <li><p>进程的阻塞</p> <ul><li><p>进程阻塞的起因</p> <ul><li>请求系统服务</li> <li>启动某种操作</li> <li>新数据尚未到达</li> <li>无新工作可做</li></ul></li> <li><p>进程阻塞的过程</p> <ul><li>1）将进程的状态改为阻塞态</li> <li>2）将进程插入相应的阻塞队列</li> <li>3）转进程调度程序，从就绪进程中选择进程为其分配 CPU</li></ul></li></ul></li> <li><p>进程的唤醒</p> <ul><li>进程唤醒的过程
<ul><li>1）将进程从阻塞队列中移出</li> <li>2）将进程状态由阻塞态改为就绪态</li> <li>3）将进程插入就绪队列</li></ul></li></ul></li> <li><p>进程的终止</p> <ul><li>进程终止的起因
<ul><li>正常结束：halt、Logoff</li> <li>异常结束：越界错误、保护错、非法指令、特权指令错、运行超时、等待超时、算术运算错、I/O 故障</li> <li>系统调用：操作员或 OS 干预、父进程请求或父进程终止</li></ul></li> <li>进程终止的过程
<ul><li>从进程 PCB 中读进程状态</li> <li>若进程正在执行，则终止进程的执行</li> <li>若进程有子孙进程，在大多数情况下需要终止子孙进程</li> <li>释放资源</li> <li>将终止进程的 PCB 移出</li></ul></li></ul></li> <li><p>操作系统的启动和系统中进程的出现</p> <ul><li>操作系统的启动和进程变化
<ul><li>硬盘启动
<ul><li>如果是单系统，引导扇区是 0 柱面 0 磁道 1 扇区，BIOS 将它装入到内存，并开始加载操作系统。</li> <li>如果是多分区多系统，主引导扇区是 0 柱面 0 磁道 1 扇区，会通过它判断当前激活分区，再加载相应的操作系统。</li></ul></li> <li>OS 启动</li></ul></li></ul></li></ol> <h2 id="_2-3-操作系统内核"><a href="#_2-3-操作系统内核" class="header-anchor">#</a> 2.3 操作系统内核</h2> <ul><li>操作系统是计算机硬件的第一次扩充，内核执行操作系统与硬件关系密切，执行频率高的模块，常住内存。操作系统内核的功能：1.支撑功能；2.资源管理功能。
<ul><li>支撑功能：包括中断处理、时钟管理、原语操作，原语操作是一种原子操作，不可分割，不能中断，例如阻塞原语 block，唤醒原语 wakeup</li> <li>资源管理功能：包括进程管理、存储管理、设备管理</li></ul></li></ul> <ol><li><p>中断</p> <ul><li>概念：改变 CPU 执行指令顺序的一种事件</li> <li>类型
<ul><li>同步中断（内部中断）：执行异常，可能是出错、调试、溢出</li> <li>异步中断（外部中断）：由其他硬件设备引发；可屏蔽/不可屏蔽</li></ul></li> <li>中断原因
<ul><li>人为设置、程序性事件、硬件故障、I/O 设备、外部事件</li></ul></li> <li>中断响应
<ul><li>相应条件是要开中断，即不屏蔽</li> <li>响应时机：每执行完一条指令后，检测一次是否有中断信号</li></ul></li> <li>中断过程
<ul><li>中断检测</li> <li>响应中断（关中断）</li> <li>保护现场</li> <li>执行中断服务子程序（处理中断原因的事件）</li> <li>恢复现场</li> <li>开中断</li> <li>继续执行</li></ul></li> <li>中断服务子程序
<ul><li>CPU 层次，使用中断向量</li> <li>操作系统层次，使用中断描述符表</li></ul></li></ul></li> <li><p>时钟管理</p> <ul><li>操作系统内核利用时钟机制防止单个进程垄断 CPU</li> <li>系统时钟
<ul><li>实时时钟，RTC 时钟，CMOS 时钟</li> <li>OS 时钟，产生于主板定时/计数芯片</li></ul></li> <li>操作系统内核需要完成两种定时测量
<ul><li>保存当前日期时间</li> <li>维持定时器</li></ul></li> <li>操作系统依靠两种方法完成定时测量
<ul><li>OS 时钟管理硬件（可编程间隔定时器 PIT）</li> <li>时钟软件，时钟驱动程序</li></ul></li></ul></li> <li><p>系统调用</p> <ul><li><strong>系统调用的概念</strong> <ul><li>一群预定义模块</li> <li>它们提供一条管道为应用程序或用户提供核心程序服务</li></ul></li> <li>系统调用是系统程序和用户程序之间的接口</li> <li>用户态执行、系统态执行的概念
<ul><li>用户态执行：用户空间是指用户进程所处的地址空间，一个用户进程不能访问其他进程的用户空间，只有系统程序才能访问其他用户空间。当 CPU 执行用户空间的代码时，称该进程在用户态执行。</li> <li>系统态执行：系统空间是指含有一切系统核心代码的地址空间，当 CPU 执行系统核心代码时，称进程处于系统态执行。</li></ul></li> <li>系统调用和一般函数调用的区别
<ul><li>1）系统调用运行在系统态（核心态），而一般函数运行在用户态</li> <li>2）系统调用与一般函数调用的执行过程不同。系统调用执行时，当前进程被中断，由系统找相应的系统调用子程序，并在系统态下执行，执行结果返回进程。</li> <li>3）系统调用要进行“中断处理”，比一般函数调用多了一些系统开销</li></ul></li> <li>系统调用类型</li> <li>Linux 系统调用举例</li></ul></li></ol> <h2 id="_2-4-进程同步"><a href="#_2-4-进程同步" class="header-anchor">#</a> 2.4 <strong>进程同步</strong></h2> <p>多任务操作系统支持多个进程并发执行，并发执行的进程共享系统的软件和硬件资源。<br>
操作系统同步机制的主要任务就是要保证在多任务共享系统资源的情况下，程序执行能得到正确的结果。</p> <ol><li><p>进程同步的基本概念</p> <ul><li>进程之间存在资源共享关系和相互合作关系</li> <li>因此进程同步有两个任务
<ul><li>一是对具有资源共享关系的进程，保证诸进程以互斥方式访问临界资源</li> <li>二是对具有相互合作关系的进程，保证进程协调执行，可能同时存在资源共享的关系</li> <li><code>临界资源</code>是指必须以<code>互斥方式访问</code>的共享资源</li></ul></li></ul></li> <li><p>同步机制应遵循的准则</p> <ul><li>1）空闲让进</li> <li>2）忙则等待</li> <li>3）有限等待</li> <li>4）让权等待：释放 CPU、避免忙等</li></ul></li> <li><p>信号量机制</p> <ul><li>作用：实现进程的同步</li> <li>1）整型信号量机制
<ul><li>使用一个代表资源数目的整型变量，即一个信号量且是整数变量</li> <li>两个标准原子操作访问信号量：wait(S)和 signal(S)，坚持 P、V 操作</li></ul></li> <li>2）记录型信号量机制
<ul><li>记录型信号量机制的优点是不存在“忙等”，采取了“让权等待”的策略。</li></ul></li> <li>3）AND 型信号量机制</li></ul></li> <li><p>经典的进程同步问题</p> <ul><li>1）<strong>生产者-消费者问题</strong></li> <li>2）<strong>读者-写者问题</strong></li></ul></li> <li><p>管程</p> <ul><li>1）管程的基本概念</li> <li>2）管程的应用</li></ul></li></ol> <h2 id="_2-5-进程通信"><a href="#_2-5-进程通信" class="header-anchor">#</a> 2.5 进程通信</h2> <p>进程之间的高级通信机制：分为共享存储器系统、消息传递系统和管道通信系统。<br>
信号量机制属于进程间的低级通信</p> <ol><li><p>共享存储器系统</p> <ul><li>两种类型：1）共享数据结构；2）共享存储区</li></ul></li> <li><p>消息传递系统</p> <ul><li>直接通信方式；间接通信方式</li></ul></li> <li><p>管道通信</p> <ul><li>以文件方式连接读写进程</li></ul></li> <li><p>消息缓冲队列</p> <ul><li>广泛应用本地进程通信</li> <li>包括数据结构、发送原语、接收原语</li></ul></li></ol> <h2 id="_2-6-线程"><a href="#_2-6-线程" class="header-anchor">#</a> 2.6 线程</h2> <ol><li><p>线程的描述</p> <ul><li>进程的不足
<ul><li>为使程序能并发执行，系统必须进行系列操作：创建、撤销、切换进程</li> <li>进程同时作为资源分配单位与调度分派单位，限制了并发程度的进一步提高</li> <li>进程“太重”，需要分割进程功能，引入线程</li></ul></li> <li>线程概念
<ul><li>线程是进程的一个实体，是独立调度和分派的基本单位</li> <li>线程作为利用 CPU 的基本单位，是花费开销最小的实体</li> <li>线程只包含运行所需的资源，即 CPU 资源，但它可以共享进程资源</li></ul></li> <li>线程的分类：用户级线程、内核级线程</li> <li>内核级线程和用户级线程的比较</li> <li>线程三种基本状态：就绪、运行、阻塞</li> <li>线程控制块 TCB
<ul><li>TCB 的定义</li> <li>TCB 包含的信息</li> <li>线程组织方式：采用链接队列</li></ul></li> <li>线程与进程的关系
<ul><li>资源与调度：线程是程序执行的基本单位，进程是拥有资源的基本单位</li> <li>地址空间资源
<ul><li>不同进程的地址空间独立</li> <li>同一进程的线程共享进程的地址空间</li></ul></li> <li>通信关系
<ul><li>进程之间用进程通信机制</li> <li>同一进程的线程直接读写或共享全局变量</li></ul></li> <li>并发性：多进程之间、多线程之间、同一进程多线程之间，都可并发</li> <li>系统开销：线程开销更小</li></ul></li></ul></li> <li><p>线程的控制</p> <ul><li>创建于终止</li> <li>调度与切换，调度可以为一个进程的多个内核线程分配多个 CPU</li> <li>阻塞与唤醒</li></ul></li> <li><p>线程的同步</p> <ul><li>类似进程，有原语操作、信号量机制</li></ul></li> <li><p>线程通信</p> <ul><li>同一进程的线程之间，直接用全局变量通信</li> <li>不同进程的线程之间，使用操作系统提供的线程通信机制</li></ul></li></ol> <h2 id="思考与练习题"><a href="#思考与练习题" class="header-anchor">#</a> 思考与练习题</h2> <ul><li>选择题</li></ul> <ol><li>操作系统提供给应用程序的接口是<code></code>。</li> <li>wait(s)操作中的 block(s.L)阻塞的进程是<code></code>。</li> <li>在一个单处理系统中存在 5 个进程，处于就绪队列中的就绪进程数最多为<code></code>。</li> <li>若记录型信号量的 wait(s)和 signal(s)操作的信号量 s 初值为 2，当前值为-1，则在 s 的阻塞队列中处于阻塞态的进程数为<code></code>。</li></ol> <ul><li>填空题</li></ul> <ol><li>进程是由正文段、<code></code>和<code></code>构成的实体。</li> <li>进程的 3 种基本状态是执行态、<code></code>和<code></code>。</li> <li>整型信号量的值只能被<code></code>和<code></code>改变，不允许系统中的其他程序改变信号量的值。</li> <li>临界区是指访问<code></code>的代码。</li></ol> <ul><li>简答题</li></ul> <ol><li>什么是进程？说明进程与程序的区别和联系。</li> <li>操作系统在什么时候创建进程？操作系统如何创建一个进程？</li> <li>时钟中断信号是如何产生的？时钟中断处理程序（时钟驱动程序）的功能是什么？</li> <li>请说明单重中断的处理过程。</li> <li>进程具有哪些特征？</li> <li>什么是线程？为什么要引入线程？</li> <li>实现进程互斥的基本原理是什么？</li></ol> <ul><li>综合应用</li></ul> <ol><li>有两个进程 pA、pB 合作解决文件打印问题：pA 将文件记录从磁盘读入主存的缓存区，每执行一次读一个记录；pB 将缓冲区的内容打印出来，每执行一次打印一个记录。缓冲区的大小等于一个记录大小。请用记录型信号量机制的 wait(s)和 signal(s)操作来保证文件的正确打印，并写出同步代码。</li></ol> <h2 id="百日题库-简答题"><a href="#百日题库-简答题" class="header-anchor">#</a> 百日题库-简答题</h2> <ul><li><p>【2018 年 4 月】相比于进程，请简述线程在地址空间资源、通信关系、并发性及系统开销方面有哪些特点？</p> <ul><li>（1）地址空间资源上，不同进程的地址空间是互相独立的，而同一进程中的各线程共享同地址空间。
（2）通信关系上，进程之间的通信必须使用操作系统提供的进程间通信机制，而同一进程中的各线程间可以通过直接读写全局变量来通信。
（3）在并发性上，多个进程和多个进程之间均可并发执行，而同一进程中多个线程之间可以并发执行。
（4）在系统开销上，相比进程而言，线程在创建、撤销及上下文切换时系统开销很小，且速度更快。</li></ul></li> <li><p>【2018 年 10 月】何为系统调用？请简述系统调用与一般函数调用的区别。</p> <ul><li>系统调用是一组预先定义好的模块，是系统程序与用户程序之间的接口，通过该接口可以得到操作系统内核（或核心程序）的服务。
系统调用与一般函数调用的区别如下：
（1）系统调用运行在系统态，而一般函数调用运行在用户态。
（2）系统调用与一般函数调用的执行过程不同。系统调用执行时，当前进程被中断，由系统找相应的系统调用子程序，并在系统态下执行，执行结果返回调用进程。
（3）系统调用要进行中断处理，比一般函数调用的系统开销要大。</li></ul></li> <li><p>【2019 年 4 月】有两个并发进程 P1、P2，其程序代码如下：<br> <img src="https://sdjrzk-1251357229.cos.ap-guangzhou.myqcloud.com/exam/paper/607/images/4781.png" alt="image"><br>
如果上述每行代码都具有原子性，请写出打印出的 z 和 c 所有可能的值。（其中 x 为 P1、P2 的共享变量）</p> <ul><li>z 的值为-1 或 3；c 的值为 1 或 9。</li></ul></li> <li><p>【2019 年 10 月】简述同步机制应遵循的原则。</p> <ul><li>准则包括：空闲让进、忙则等待、有限等待和让权等待</li></ul></li> <li><p>【2020 年 8 月】请简述内核级线程与用户级线程在线程调度、切换速度、系统调用、执行时间分配四个方面的区别。</p> <ul><li>（1）线程调度上：内核级线程的调度由内核的线程调度程序完成，用户级线程的调度则由用户线程包中一个过程来完成。
（2）切换速度上：内核级线程切换慢，用户级线程切换快。
（3）系统调用上：内核级线程进行系统调用，只阻塞该线程。用户级线程的系统调用，要阻塞线程所属的进程。
（4）执行时间分配上：内核级线程的 CPU 时间以线程为单位分配，每一个线程都可以独享一个 CPU 时间片。用户级线程的 CPU 时间以进程为单位，同一个进程的多个线程共享一个 CPU 时间片。</li></ul></li> <li><p>【2020 年 10 月】列出线程控制的四项基本操作功能。</p> <ul><li>线程创建、线程的终止、线程的调度与切换、线程的阻塞与唤醒。</li></ul></li> <li><p>【2021 年 4 月】从系统开销的角度论述线程与进程在创建或撤销、上下文切换时的处理区别。</p> <ul><li>创建或撤消进程时，系统都要为之分配或者回收资源，其开销远大于创建或撤销线程时的开销。进程上下文切换时，需要保存当前进程的所有 CPU 环境，并设置新进程的 CPU 环境；而线程下文切换时，只需要保存和设置几个寄存器内容，开销很小。同一进程内的线程共享进程的地址空间，切换更快。</li></ul></li> <li><p>【2021 年 10 月】除了 I/O 设备被启动时会引起中断之外，还有哪四种原因会引起中断？</p> <ul><li>（1）人为设置中断；（2）程序性事故；（3）硬件故障；（4）外部事件。</li></ul></li> <li><p>【2022 年 4 月】程序的并发执行，有哪三个特点？为了对共享资源进行管理，操作系统引入了什么机制？</p> <ul><li>（1）间断性，失去封闭性，不可再现性。（2）引入了信号量机制。</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/szu/os/chapter-1.html" class="prev">
        第1章 操作系统简介
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3b4388ed.js" defer></script><script src="/assets/js/2.10b3e4ea.js" defer></script><script src="/assets/js/55.4b34c753.js" defer></script>
  </body>
</html>
