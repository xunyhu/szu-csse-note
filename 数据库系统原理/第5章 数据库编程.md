## 5.1 存储过程

1. 存储过程的基本概念

   - 在多数情况下，许多代码会被重复使用多次，且每次都会输入相同的代码，这样既繁琐又会降低系统的运行效率。因此，需要提供一种方法，它可以将些固定的操作集合起来，由数据库服务器来完成，实现某个特点任务，这就是存储过程。
   - 存储过程是一组为了完成某项特定功能的` SQL 语句集`，其实质就是一段存储在数据库中的代码，它可以由`声明式的 SQL 语句`和`过程式 SQL 语句`组成。这些语句集经过编译后存储在数据库中，用户通过指定存储过程的名字和参数来调用并执行存储过程，而不必重新编译。
   - 一个存储过程是一个可编程的函数，同时可看作是在数据库编程中面向对象方法的模拟，它允许控制数据的访问方式。当希望在不同的应用程序或平台上执行相同的特定功能时，存储过程尤为合适。
   - 使用存储过程的好处：
     - 1）可增强 SQL 语言的功能和灵活性；
     - 2）良好的封装性；
     - 3）高性能；
     - 4）可减少网络流量；
     - 5）存储过程作为一种安全机制来确保数据库的安全性和数据的完整性。

2. 创建存储过程

   - 在 MySQL 数据库中通过命令行的方式来创建存储过程时，经常会用到一个十分重要的命令，即 DELIMITER 命令。

3. 存储过程体

   - 1）DECLARE 语句声明局部变量
   - 2）SET 语句为局部变量赋值
   - 3）SELECT...INTO 语句把选定列的值直接存储到局部变量中
   - 4）流程控制语句
   - 5）游标

4. 调用存储过程
5. 删除存储过程

## 5.2 存储函数

1. 创建存储函数
2. 调用存储函数
3. 删除存储函数

## 思考与练习

- 简答题

1. 请简述存储过程的概念。
2. 请简述在数据库的操作中使用存储过程的优点。
3. 请简述存储过程与存储函数的区别。

- 操作题  
  在数据库 db_test 中创建一个存储过程，用于实现在给定 content 表中一个留言人的姓名时，即可修改 content 表中该留言人的电子邮件地址为一个新的地址值。
