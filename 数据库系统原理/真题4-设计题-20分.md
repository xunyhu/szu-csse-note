# 设计题（一道大题 5 个小题\*4 分，20 分）

- 考察：关系代数、SQL

1. 【2023.04】某设备组装管理系统的数据库中包括如下关系表：
   设备表（设备编号，设备名称，制造商名称）  
   零件表（零件编号，零件名称，零件单价，设备编号）  
   试实现下列操作：

   1）使用关系代数查询制造商名称为“腾飞”的设备编号。

   2）使用关系代数查询设备编号为“E0108”的设备所使用的零件编号和零件名称。

   3）使用 SQL 语句查询每个设备的编号及使用的零件总数量。

   4）使用 SQL 语句查询使用了零件名称为“铜合金螺母”的设备名称和制造商名称。（用嵌套查询）

   5）使用 SQL 语句建立设备名称为“LT 数控”的设备所使用的零件名称和零件单价视图 V_QK，该视图包括信息：设备编号，零件名称，零件单价。

   - 答
      - 1. σ设备编号, 制造商名称="腾飞"(设备表)
      - 2. σ零件编号, 零件名称, 设备编号="E0108"(零件表)
      - 3. select 设备编号, count(零件名称) as 零件总数量 from 零件表
      - 4. select 设备名称,制造商名称 from 设备表 where(设备编号=(select 设备编号 from 零件表 where 零件名称="铜合金螺母"))
      - 5. create view V_QK(设备编号，零件名称，零件单价) 
   
   - 参考
      - π设备编号(σ制造商名称='腾飞'(设备表))
      - π零件编号, 零件名称(σ设备编号="E0108"(零件表))
      - SELECT设备编号，COUNT(零件编号) AS 零件总数量 FROM 零件表 GROUP BY设备编号；
      - SELECT设备名称，制造商名称 FROM 设备表 WHERE 设备编号=(SELECT 设备编号 FROM 零件表 WHERE 零件名称='铜合金螺母');
      - CREATE VIEW V_QK(设备编号，零件名称，零件单价) AS SELECT 设备表.设备编号,零件名称,零件单价 FROM 设备表,零件表 WHERE 设备表.设备编号=零件表.设备编号 AND 设备名称='LT数控';

2. 【2022.04】某商品管理系统的数据库中包括如下关系表：

   - 商品表（商品编号，商品名称，单价，数量）
   - 供应商表（供应商编号，供应商名称，地址，电话）
   - 供应表（供应商编号，商品编号，供应时间，联系人）

   试实现下列操作：

   1. 使用 SQL 语句查询每个供应商编号及供应的商品总数量。

   2. 使用 SQL 语句查询供应商“华为”所供应的商品编号和供应时间。（用嵌套查询）

   3. 使用 SQL 语句建立“华为”供应商供应的商品视图 V_HW，该视图包括信息：供应商名称，商品编号，供应时间，联系人。

   4. 使用关系代数查询商品名称为“打印机”的商品编号。

   5. 使用关系代数查询供应商编号为“HT220107”所供应的商品编号和联系人。

3. 【2021.10】某图书管理系统数据库中包含三个关系：

   - 图书（条形码，书名，作者姓名，出版社，单价）
   - 读者（借书证号，姓名，性别）
   - 借阅（借书证号，条形码，借书日期，还书日期）

   试实现下列操作：

   1. 使用关系代数查询“数据库系统原理”书的作者姓名。

      - π 作者姓名(σ 书名＝'数据库系统原理'(图书))

   2. 使用关系代数查询借书证号为“2021003”借阅图书的条形码和借书日期。

      - π 条形码，借书日期(σ 借书证号＝'2021003'(借阅))

   3. 使用 SQL 语句查询每个出版社出版的图书总数量。

      - select count(出版社) from 图书;
      - `SELECT 出版社,COUNT(*) AS 图书总数量 FROM 图书 GROUP BY 出版社`
      - `是否有“As '图书总数量'”均可以。`

   4. 使用 SQL 语句查询读者“黄靖”借阅的图书条形码和借书日期。（用嵌套查询）

      - select 条形码 AS 图书条形码, 借书日期 from 借阅 where 借书证号=(select 借书证号 from 读者 where 姓名 = "黄靖");
      - `SELECT 条形码,借书时间 From 借阅 WHERE 借书证号=(SELECT 借书证号 FROM 读者 WHERE 姓名='黄靖')`;

   5. 使用 SQL 语句建立“女”读者借阅图书的视图 FBB，该视图包括信息：借书证号，借阅人，书名，借书日期。

      - create view FBB, select (select 借书证号 from 读者 where 性别 = "女"),
      - `create view FBB(借书证号，借阅人，书名，借书日期) AS select 借阅.借书证号,姓名,书名,借书日期 from 读者`
      - `CREATE VIEW FBB(借书证号,借阅人,书名,借书日期) AS SELECT 借阅.借书证号,姓名,书名,借书日期 FROM 读者,借阅,图书 WHERE 读者.借书证号=借阅.借书证号 AND 借阅.条形码=图书.条形码 AND 性别='女'`;

4. 【2020.10】某学生管理系统的数据库有如下三个关系：

   - 学生（学号，姓名，性别，院系编号）
   - 课程（课程号，课程名，学分）
   - 选修（学号，课程号，成绩）

   试实现下列操作：

   1. 使用关系代数查询大于 3 学分的课程信息。

      - σ 学分>3(课程)

   2. 使用关系代数查询学生的院系编号。

      - σ 院系编号(学生)
      - `π 院系编号(学生)`

5. 【2019.10】某超市商品采购数据库包含三个关系：

   - 商品（商品编号，商品名，价格，生产日期）
   - 采购员（编号，姓名，性别，联系电话）
   - 采购（商品编号，编号，采购日期，采购数量）

     实现下列操作：

     1. 使用 SQL 语言查询价格在 10-15 元之间的商品编号。

     2. 使用 SQL 语言查询“刘聪”采购的商品编号、采购日期和采购数量。（用嵌套查询）

     3. 使用 SQL 语言建立一个采购数量大于 100 的采购信息视图 VSC，该视图包括商品编号、编号和采购日期。

     4. 使用关系代数查询“女”采购员的所有信息。

        - π 编号，姓名，性别，联系电话(σ 性别＝'女'(采购员))
        - `σ性别＝'女'(采购员)`

     5. 使用关系代数查询所有商品的商品名和生产日期。
        - π 商品名, 生产日期(商品)
