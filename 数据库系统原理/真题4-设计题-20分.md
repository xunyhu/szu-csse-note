# 设计题（一道大题 5 个小题\*4 分，20 分）

- 考察：关系代数、SQL
- 投影 π ；选择 σ ；考试需要大写

1. 【2023.04】某设备组装管理系统的数据库中包括如下关系表：
   设备表（设备编号，设备名称，制造商名称）  
   零件表（零件编号，零件名称，零件单价，设备编号）  
   试实现下列操作：

   1）使用关系代数查询制造商名称为“腾飞”的设备编号。

   2）使用关系代数查询设备编号为“E0108”的设备所使用的零件编号和零件名称。

   3）使用 SQL 语句查询每个设备的编号及使用的零件总数量。

   4）使用 SQL 语句查询使用了零件名称为“铜合金螺母”的设备名称和制造商名称。（用嵌套查询）

   5）使用 SQL 语句建立设备名称为“LT 数控”的设备所使用的零件名称和零件单价视图 V_QK，该视图包括信息：设备编号，零件名称，零件单价。

   - 答

     - 1. σ 设备编号, 制造商名称="腾飞"(设备表)
     - 2. σ 零件编号, 零件名称, 设备编号="E0108"(零件表)
     - 3. select 设备编号, count(零件名称) as 零件总数量 from 零件表
     - 4. select 设备名称,制造商名称 from 设备表 where 设备编号=(select 设备编号 from 零件表 where 零件名称="铜合金螺母")
     - 5. create view V_QK(设备编号，零件名称，零件单价) as select 设备表.设备编号，零件名称，零件单价 from 设备表，零件表 where 设备表.设备编号=零件表.设备编号 AND 设备名称 = “LT 数控”;

   - 参考
     - π 设备编号(σ 制造商名称='腾飞'(设备表))
     - π 零件编号, 零件名称(σ 设备编号="E0108"(零件表))
     - SELECT 设备编号，COUNT(零件编号) AS 零件总数量 FROM 零件表 GROUP BY 设备编号；
     - SELECT 设备名称，制造商名称 FROM 设备表 WHERE 设备编号=(SELECT 设备编号 FROM 零件表 WHERE 零件名称='铜合金螺母');
     - CREATE VIEW V_QK(设备编号，零件名称，零件单价) AS SELECT 设备表.设备编号,零件名称,零件单价 FROM 设备表,零件表 WHERE 设备表.设备编号=零件表.设备编号 AND 设备名称='LT 数控';

2. 【2022.10】某高校教师项目信息管理系统的数据库包含三个关系：
   教师（教师工号，姓名，性别，年龄，职称）  
   项目（项目号，项目名称，级别）  
   申报（教师工号，项目号，工作量）  
   试实现下列操作：

   1）使用关系代数查询“省级”级别的项目信息。  
   2）使用关系代数查询教师的教师工号、姓名和职称。  
   3）使用 SQL 语句查询每名教师的总工作量
   4）使用 SQL 语句查询申报项目名称为“图像采集”的教师工号。（用嵌套查询）  
   5）使用 SQL 语句将“王宏”老师的职称改为“教授”。

3. 【2022.04】某商品管理系统的数据库中包括如下关系表：

   - 商品表（商品编号，商品名称，单价，数量）
   - 供应商表（供应商编号，供应商名称，地址，电话）
   - 供应表（供应商编号，商品编号，供应时间，联系人）

   试实现下列操作：

   1. 使用 SQL 语句查询每个供应商编号及供应的商品总数量。

   2. 使用 SQL 语句查询供应商“华为”所供应的商品编号和供应时间。（用嵌套查询）

   3. 使用 SQL 语句建立“华为”供应商供应的商品视图 V_HW，该视图包括信息：供应商名称，商品编号，供应时间，联系人。

   4. 使用关系代数查询商品名称为“打印机”的商品编号。

   5. 使用关系代数查询供应商编号为“HT220107”所供应的商品编号和联系人。

4. 【2021.10】某图书管理系统数据库中包含三个关系：

   - 图书（条形码，书名，作者姓名，出版社，单价）
   - 读者（借书证号，姓名，性别）
   - 借阅（借书证号，条形码，借书日期，还书日期）

   试实现下列操作：

   1. 使用关系代数查询“数据库系统原理”书的作者姓名。

   2. 使用关系代数查询借书证号为“2021003”借阅图书的条形码和借书日期。

   3. 使用 SQL 语句查询每个出版社出版的图书总数量。

   4. 使用 SQL 语句查询读者“黄靖”借阅的图书条形码和借书日期。（用嵌套查询）

   5. 使用 SQL 语句建立“女”读者借阅图书的视图 FBB，该视图包括信息：借书证号，借阅人，书名，借书日期。

5. 【2021.04】某服装租赁公司数据库包含三个关系：
   服装（服装编号，服装名，租金，类名）  
   会员（会员编号，会员名，年龄，所在区，联系电话）  
   租借（服装编号，会员编号，租赁日期，归还日期）  
   实现下列操作：

   1）使用关系代数查询“皇姑区”的会员信息。  
   2）使用关系代数查询租借的服装编号、会员编号和租借日期。  
   3）使用 SQL 语句查询每个相同类别的类名及服装数量。  
   4）使用 SQL 语言查询“李芳”租借过的服装编号和租借日期。（用嵌套查询）  
   5）使用 SQL 语言建立一个“京剧”类别的视图 VLJ，该视图包括信息:服装编号、服装名和租金。

6. 【2020.10】某学生管理系统的数据库有如下三个关系：

   - 学生（学号，姓名，性别，院系编号）
   - 课程（课程号，课程名，学分）
   - 选修（学号，课程号，成绩）

   试实现下列操作：

   1. 使用关系代数查询大于 3 学分的课程信息。
   2. 使用关系代数查询学生的院系编号。
   3. 使用 SQL 语句查询每个院系的院系编号、性别及相应性别的人数。
   4. 使用 SQL 语言查询选修了“数据库”课程的学生学号和成绩。
   5. 使用 SQL 语言删除“001”号学生的选修成绩。

7. 【2020.08】某学生社团管理系统的数据库包含如下三个关系表：
   学生（学号,姓名,年龄,性别,所在系）  
   协会（协会编号,协会名,办公地点,负责人）  
   入会（学号,协会编号,入会日期）  
   实现下列操作：

   1）使用关系代数查询“科技”协会的信息。  
   2）使用关系代数查询学生的学号，姓名和所在系。  
   3）使用 SQL 语句查询每个相同协会的入会学生数，并按学生数降序排列。  
   4）使用 SQL 语句查询加入协会编号为“XH4”的学号、姓名和所在系。  
   5）使用 SQL 语句将“自愿者”协会的办公地点改为“F109”。

8. 【2019.10】某超市商品采购数据库包含三个关系：

   - 商品（商品编号，商品名，价格，生产日期）
   - 采购员（编号，姓名，性别，联系电话）
   - 采购（商品编号，编号，采购日期，采购数量）

     实现下列操作：

     1. 使用 SQL 语言查询价格在 10-15 元之间的商品编号。

     2. 使用 SQL 语言查询“刘聪”采购的商品编号、采购日期和采购数量。（用嵌套查询）

     3. 使用 SQL 语言建立一个采购数量大于 100 的采购信息视图 VSC，该视图包括商品编号、编号和采购日期。

     4. 使用关系代数查询“女”采购员的所有信息。

     5. 使用关系代数查询所有商品的商品名和生产日期。

9. 【2019.04】某工程管理系统的数据库包含如下三个关系表：
   职工(职工号，姓名，性别，年龄)  
   工程(工程号，工程名，预算)  
   报酬(职工号，工程号，工资)  
   实现下列操作：

   1）使用关系代数查询年龄在 40 岁以上（不包括 40 岁）的职工信息。  
   2）使用关系代数查询职工的职工号和姓名。  
   3）使用 SQL 语句查询每名职工的职工号及总收入。  
   4）使用 SQL 语句查询职工“王奇”所做的工程号和工资。（用嵌套查询做）  
   5）使用 SQL 语句将“园区绿化”工程的预算提升 0.5%。

10. 【2018.10】某房屋租赁公司数据库包含三个关系：
    房屋(房屋编号，小区名，租金，地区)  
    会员(会员编号，会员名，性别，所在区，联系电话)  
    租赁(房屋编号，会员编号，租借日期，到期日期)  
    实现下列操作：

    1）使用关系代数查询“万科城”小区的房屋信息。  
    2）使用关系代数查询会员的会员名和联系电话。  
    3）使用 SQL 语句查询每个相同地区的房屋数量。  
    4）使用 SQL 语言查询“李红”租过的房屋编号和租借日期。  
    5）使用 SQL 语言建立一个“男”会员的视图 VSH，该视图包括信息：会员编号，会员名，性别，联系电话。
