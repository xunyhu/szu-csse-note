## 3.1 数据库设计概念

1. 数据库的生命周期

   - 通常从数据库演变过程的角度来看，数据库的生命周期可以分为两个阶段：`数据库分析与设计`阶段、`数据库实现与操作`阶段。
   - 数据库分析与设计阶段包括：`需求分析`、`概念设计`、`逻辑设计`、`物理设计`。
   - 数据库实现与操作阶段包括：`数据库的实现`、`操作与监督`、`修改与调整`。

2. 数据库设计的目标

   - 数据库设计具有两个重要目标：满足应用功能需求和良好的数据库性能。
   - `满足应用功能需求`
     - 主要是指用户当前与可预知的将来应用所需要的数据及其联系，应全部准确地存储在数据库之中，从而可满足用户应用中所需要的对数据进行的存、取、删、改等操作。
   - `良好的数据库性能`
     - 主要是指对数据的高效率存取和空间的节省，并具有良好的数据共享性、完整性、一致性及安全保密性。因此，在进行数据库设计时，设计者必须确定系统的目标，这样可以确保开发工作进展顺利，并能够提高工作效率，保证数据模型的准确和完整。

3. 数据库设计的内容

   - 数据库设计是从用户对`数据的需求`出发，研究并`构造数据库`的过程。
   - 数据库结构设计
     - 针对给定的应用环境进行数据库的模式或子模式的设计，包括数据库的`概念`结构设计、`逻辑`结构设计、`物理`结构设计。
   - 数据库行为设计
     - 确定数据库用户的`行为和动作`，而用户的行为和动作是对数据库的操作，它们通常是通过应用程序来实现的。由于用户的行为会使数据库的内容发生变化，所以行为设计是`动态`的。

4. 数据库设计的方法

   - 概况而言，可分为三类，即直观设计法、规范设计法和计算机辅助设计法。
   - 直观设计法
     - 利用设计者的经验和技巧来设计数据库模式。由于缺乏科学理论的指导，设计的质量很难保证。
   - 规范设计法：较为普遍、常用的数据库设计方法。常见有：
     - 1）新奥尔良设计方法
       - 1978 年提出，目前公认的较为完整和权威的一种规范设计方法。分为需求分析、概念结构设计、逻辑结构和物理结构设计，它注重结构设计，而不太考虑数据库的行为设计。
     - 2）基于 E-R 模型的数据库设计方法
       - 由 P.P.S.Chen 于 1976 年提出的，其基本思想是在需求分析的基础上用 E-R 图构造出一个反映现实世界实体之间联系的企业模式，然后将此模式转换成某一特定 DBMS 下的概念模式。
     - 3）基于第三范式的设计方法
       - 一类结构化设计方法，其思想是在需求分析的基础上首先确定数据库的模式、属性及属性间的依赖关系，然后将它们组织在一个单一的关系模式中，再分析模式中不符合第三范式的约束条件，进行模式分解，规范成若干个第三范式关系模式的集合。
   - 计算机辅助设计法
     - 在数据库设计过程中，以领域专家的知识或经验为主导，模拟某一规范化设计的方法，通常通过人机交互的方式来完成设计的某些过程。
     - 例如 Rational 公司的 Rational Rose 等

5. 数据库设计的过程
   - 1）需求分析阶段
   - 2）结构设计阶段，其包括概念结构设计、逻辑结构设计、物理结构设计
   - 3）行为设计阶段，其包括功能设计、事务设计、程序设计
   - 4）数据库实施阶段，其包括加载数据库数据、调试运行应用程序
   - 5）数据库运行和维护阶段

## 3.2 数据库设计的基本步骤

1. 数据库设计的基本步骤

   - `分阶段规范设计方法`已在数据库设计中得到广泛的应用，并获得了较好的效果。该方法`遵循自顶向下、逐步求精的原则`，将数据库设计过程分解为若干个相互依存的阶段。
   - 数据库设计的各个阶段，又称为`数据库设计步骤`。主要讨论数据库结构设计过程中涉及的需求分析、概念结构设计、逻辑结构设计、物理结构设计、数据库实施、数据库的运行和维护。这些都是数据库设计中`最重要`的任务。

2. 需求分析

   - 需求分析的目标是了解与分析用户的信息及应用处理的要求，并将结果按一定格式整理而形成需求分析报告。
   - 该分析报告是后续概念设计、逻辑设计、物理设计、数据库建立与维护的依据。
   - 需求分析的基本方法是听取数据库应用部门工作人员的报告，并与之座谈。同时，需求分析人员可提交一份需求调查表。
   - 需求分析可分为`四个步骤`，即确定数据库范围、分析数据应用过程、手机与分析数据和编写需求分析报告。
     - 1)确定数据库范围：确定数据库应该支持哪些应用功能。尽可能地考虑较为广泛，充分满足用户的应用功能要求。同时，尽可能地考虑将来的应用需求，以提高数据库的应变能力。
     - 2）应用过程分析：指了解并分析数据与数据处理间的关系。
       - 在数据库范围确定之后，数据库设计人员应逐次地了解和分析每一部门或功能要用到哪些数据、数据使用的顺序、对数据作何处理和处理的策略以及处理的结果等。
       - 是数据库应用程序编写的依据。
       - 可以借助数据流程图或其他信息及应用知识。
     - 3）收集与分析数据：任务是了解并分析数据的组成格式及操作特征，每个数据元素的语义及关系等，并将它们收集起来整理归档。
       - 数据流程图中所涉及的数据都是收集与分析的对象，主要包括报表、文件、单据及各种原始资料。
       - 数据的收集与分析工作可从以下三个方面展开：
         - 静态结构：是指不施加应用操作于其上时数据的原始状况，这可通过`数据分类表`和`数据元素表`进行说明；
         - 动态结构：是指将应用操作施加于数据之上后数据的状况，可通过`任务分类表`和`数据操作特征表`进行说明；
         - 数据约束：是指使用数据时的特殊要求。主要有数据安全保密性、数据完整性、响应时间、数据恢复。
     - 4）编写需求分析报告：作为需求分析阶段的一个总结，数据库设计人员需要编写需求分析报告。
       - 1.数据库的应用功能目标
       - 2.标明不同用户视图范围
       - 3.应用处理过程需求说明
       - 4.数据字典：数据库系统中存储三级结构定义的数据库，通常指的是数据库系统中各类数据详细描述的集合。它的功能是存储和检索各种数据描述，即云数据。
         - 在数据库设计中，它提供了对各类数据描述的集中管理，是一种数据分析、系统设计和管理的有力工具。
       - 5.数据量
       - 6.数据约束

3. 概念结构设计

   - 概念结构设计的任务是在需求分析中产生的需求分析报告的基础上，按照特定的方法`设计满足应用需求的用户信息结构`，该信息结构通常称为`概念模型`。
   - 概念模型`独立于任何软件与硬件`，其设计的主要目标是最大限度地满足应用需求，可完全不顾及具体的硬件和软件的限制
   - 概念结构设计的常用方法有实体分析法（自顶向下）和属性综合法（自底向上）两种
   - 针对关系型数据库的设计介绍`自顶向下`法，其中是`采用 E-R 图`作为概念模型的描述工具。

4. 逻辑结构设计

   - 逻辑结构设计的`目标`是将`概念模型转换为等价的、并为特定DBMS所支持数据模型的结构`。数据库逻辑模型一般由层次、网状、关系数据模型表示。
   - 1. `模型转换`是指将概念模型等价地转换为特定 DBMS 支持的关系模型、网状模型或层次模型表示。对于一个特定的应用环境，通常只转换为用户要求的某个特定 DBMS 所支持的一种模型表示。
   - 2）`子模式设计`的目标是`抽取或导出模式的子集`，以构造不同用户使用的局部数据逻辑结构。
   - 3）编制应用程序设计说明的目的是为可实际运行的应用程序设计`提供依据与指导`，并作为设计评价的基础。
   - 4. 设计评价的任务是`分析并检验模式及子模式`的正确性与合理性

5. 物理设计

   - 物理设计是指`对于一个给定的数据库逻辑结构，研究并构造物理结构的过程`，其具体任务主要是确定数据库在存储设备上的存储结构及存取方法，因 DBMS 的不同还可能包括建立索引和聚集，以及物理块大小、缓冲区个数和大小、数据压缩的选择等。

6. 数据库实施

   - 完成数据库的逻辑与物理结构设计之后，就可以在实际的计算机系统中建立数据库并试运行了。数据库实施阶段需要完成的工作包括：
     - 1）加载数据
     - 2）应用程序设计
     - 3）数据库试运行

7. 数据库运行和维护
   - 只有经过试运行之后，确认系统无故障或暂未发现故障时，系统才能投入到生产实际中运行。
   - 数据库系统投入实际运行`标志`着数据库设计和应用开发工作的终止。
   - 系统维护中`最困难的工作`是数据库`重组与重构`。

## 3.3 关系数据库设计方法

1. 关系数据库设计方法

   - 关系数据库的概念结构设计与逻辑结构设计师关系数据库整个设计过程的关键。本节则主要介绍关系数据库的概念结构设计、逻辑结构设计、物理设计中的相关方法。

2. 概念结构设计方法

   - 关系数据库的概念结构设计通常采用自顶向下法，它通过两个步骤来完成概念设计，即首先`建立局部信息结构`，然后将局部信息结构合成为`全局信息结构`并优化，其中使用 E-R 图作为概念模型的描述工具。

3. E-R 图的表示方法
   - 概念结构设计就是将需求分析得到的用户需求抽象为信息结构（即概念模型）的过程，它通常使用 E-R 图来作为描述现实世界的建模工具。E-R 图提供了表示信息世界中实体、属性和联系的方法。
     - 实体：用矩形表示，矩形框内写明实体的名称；
     - 属性：用椭圆形表示，并用无向边将其与相应的实体连接起来；
     - 联系：用菱形标识，菱形框内写明联系的名称，并用无向边分别与有关实体连接起来，同时在无向边旁边标上联系的类型（1：1，,1：N 或 M：N），如果一个联系具有属性，这些属性也要用无向边与该联系连接起来。
   - 两个以上的实体型之间也会存在一对一、一对多、多对多的联系。
   - 同一个实体集内的各实体之间也可以存在一对一、一对多或多对多的联系。
