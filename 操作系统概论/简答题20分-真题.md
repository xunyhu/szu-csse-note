## 第 2 章 进程管理

1. 线程可以分为哪两种？这两种线程在调度与切换速度上有什么不同？【202304】 教材 p82

   - 线程可以分为：用户级线程和内核级线程。
   - 从线程的调度与切换速度比较：
     - 调度：内核级的调度由内核的线程调度程序完成，用户级线程的调度则由用户线程包中的一个过程来完成。内核级线程的调度程序运行在系统态，用户级线程的调度程序运行在用户态。
     - 切换速度：内核级线程切换慢，用户级线程切换快。

2. 什么是用户态执行？什么是系统态执行？【202210】 教材 p62

   - 1）用户态执行
     - 用户空间是指用户进程所处的地址空间，一个用户进程不能访问其他进程的用户空间，只有系统程序才能访问其他用户空间。当 CPU 执行用户空间的代码时，称该进程在用户态执行。
   - 2）系统态执行
     - 系统空间是指含有一切系统核心代码的地址空间，当 CPU 执行系统核心代码时，称进程处于系统执行。

3. 程序的并发执行，有哪三个特点？为了对共享资源进行管理，操作系统引入了什么机制？【2020.04】教材 p42，p65 进程同步

   - 三个特点：间断性、失去封闭性、不可再现性
   - `引入了信号量机制`

4. 除了 I/O 设备被启动时会引起中断之外，还有哪四种原因会引起中断？【202110】教材 p56

   - 1）人为设置中断。
   - 2）程序性事故
   - 3）硬件故障
   - 4）外部事件。如用户通过键盘和鼠标来中断现行程序。

5. 从系统开销的角度论述线程与进程在创建或撤销、上下文切换时的处理区别。【202104】教材 p83

   - 由于创建进程或撤销进程时，系统都要为之分配或回收资源，操作系统所付出的开销远大于创建或撤销线程时的开销。
   - 在进行进程上下文切换时，涉及整个当前进程的 CPU 环境的保存及新调度到进程的 CPU 环境的设置。而线程上下文切换时，只需要保存和设置少量寄存器内容，因此开销很小。

6. 列出线程控制的四项基本操作功能。【202010】 p84

   - 1）创建新线程
   - 2）终止线程
   - 3）线程的调度与切换
   - 4）线程的阻塞与唤醒

7. 请简述内核级线程与用户级线程在线程调度、切换速度、系统调用、执行时间分配四个方面的区别。【202008】 p82

   - 1）线程调度
     - 内核级的调度由内核的线程调度程序完成，用户级线程的调度则由用户线程包中的一个过程来完成。内核级线程的调度程序运行在系统态，用户级线程的调度程序运行在用户态。
   - 2）切换速度
     - 内核级线程切换慢，用户级线程切换快。
   - 3）系统调用
     - 内核级线程进行系统调用，只阻塞该线程。用户级线程的系统调用，要阻塞线程所属的进程。
   - 4）执行时间
     - 内核级的 CPU 时间`以线程为单位`分配，每一个线程都可以独享一个 CPU 时间片。
     - 用户级线程的 CPU 时间`以进程为单位`，同一个进程的多个线程共享一个 CPU 时间片。

8. 简述同步机制应遵循的原则。【201910】p66

   - 1）空闲让进
   - 2）忙则等待
   - 3）有限等待
   - 4）让权等待

9. 有两个并发进程 P1、P2，其程序代码如下： 【201904】

   ```c
   P1(){
     x = 1;
     y = 2;
     z = x + y;
     print z;
   }

   P2(){
     x = -3;
     c = x * x;
     print c;
   }
   ```

   如果上述每行代码都具有原子性，请写出打印出的 z 和 c 所有可能的值。（其中 x 为 P1、P2 的共享变量）

   - `z的值为-1或3；c的值为1或9。`

10. 何为系统调用？请简述系统调用与一般函数调用的区别。【201810】P62

    - 系统调用：系统调用是一群预先定义好的模块，它们提供一条管道让应用程序或一般用户能由此得到核心程序的服务。系统调用是系统程序与用户程序之间的接口。
    - 区别：
      - 1）系统调用运行在系统态（核心态），而一般函数运行在用户态。
      - 2）系统调用与一般函数调用的执行过程不同。系统调用执行时，当前进程被中断，由系统找相应的系统调用子程序，并在系统态下执行，执行结果返回进程。
      - 3）系统调用要进行“中断处理”，比一般函数调用多了一些系统开销。

11. 相比于进程，请简述线程在地址空间资源、通信关系、并发性及系统开销方面有哪些特点？【201804】 p83
    - 1）地址空间资源
      - 不同进程的地址空间是相互独立的，而同一进程中的各线程共享同一地址空间。
    - 2）通信关系
      - 进程之间的通信必须使用操作系统提供的进程间通信机制，而同一进程中的各线程间可以通过直接读或写全局变量来进行通信。
    - 3）并发性
      - 多进程之间可以并发执行，多线程之间也可以并发执行，而且同一进程中的多个线程之间也可以并发执行。
    - 4）系统开销
      - 创建进程或撤销进程的开销远大于线程的开销。
