# 简答题（5\*4，20 分）

## 第 1 章 无

## 第 2 章 进程管理

1. 线程可以分为哪两种？这两种线程在调度与切换速度上有什么不同？【202304】 教材 p82

   - 线程可以分为：用户级线程和内核级线程。
   - 从线程的调度与切换速度比较：
     - 调度：内核级的调度由内核的线程调度程序完成，用户级线程的调度则由用户线程包中的一个过程来完成。内核级线程的调度程序运行在系统态，用户级线程的调度程序运行在用户态。
     - 切换速度：内核级线程切换慢，用户级线程切换快。

2. 什么是用户态执行？什么是系统态执行？【202210】 教材 p62

   - 1）用户态执行
     - 用户空间是指用户进程所处的地址空间，一个用户进程不能访问其他进程的用户空间，只有系统程序才能访问其他用户空间。当 CPU 执行用户空间的代码时，称该进程在用户态执行。
   - 2）系统态执行
     - 系统空间是指含有一切系统核心代码的地址空间，当 CPU 执行系统核心代码时，称进程处于系统执行。

3. 程序的并发执行，有哪三个特点？为了对共享资源进行管理，操作系统引入了什么机制？【2020.04】教材 p42，p65 进程同步

   - 三个特点：间断性、失去封闭性、不可再现性
   - `引入了信号量机制`

4. 除了 I/O 设备被启动时会引起中断之外，还有哪四种原因会引起中断？【202110】教材 p56

   - 1）人为设置中断。
   - 2）程序性事故
   - 3）硬件故障
   - 4）外部事件。如用户通过键盘和鼠标来中断现行程序。

5. 从系统开销的角度论述线程与进程在创建或撤销、上下文切换时的处理区别。【202104】教材 p83

   - 由于创建进程或撤销进程时，系统都要为之分配或回收资源，操作系统所付出的开销远大于创建或撤销线程时的开销。
   - 在进行进程上下文切换时，涉及整个当前进程的 CPU 环境的保存及新调度到进程的 CPU 环境的设置。而线程上下文切换时，只需要保存和设置少量寄存器内容，因此开销很小。

6. 列出线程控制的四项基本操作功能。【202010】 p84

   - 1）创建新线程
   - 2）终止线程
   - 3）线程的调度与切换
   - 4）线程的阻塞与唤醒

7. 请简述内核级线程与用户级线程在线程调度、切换速度、系统调用、执行时间分配四个方面的区别。【202008】 p82

   - 1）线程调度
     - 内核级的调度由内核的线程调度程序完成，用户级线程的调度则由用户线程包中的一个过程来完成。内核级线程的调度程序运行在系统态，用户级线程的调度程序运行在用户态。
   - 2）切换速度
     - 内核级线程切换慢，用户级线程切换快。
   - 3）系统调用
     - 内核级线程进行系统调用，只阻塞该线程。用户级线程的系统调用，要阻塞线程所属的进程。
   - 4）执行时间
     - 内核级的 CPU 时间`以线程为单位`分配，每一个线程都可以独享一个 CPU 时间片。
     - 用户级线程的 CPU 时间`以进程为单位`，同一个进程的多个线程共享一个 CPU 时间片。

8. 简述同步机制应遵循的原则。【201910】p66

   - 1）空闲让进
   - 2）忙则等待
   - 3）有限等待
   - 4）让权等待

9. 有两个并发进程 P1、P2，其程序代码如下： 【201904】

   ```c
   P1(){
     x = 1;
     y = 2;
     z = x + y;
     print z;
   }

   P2(){
     x = -3;
     c = x * x;
     print c;
   }
   ```

   如果上述每行代码都具有原子性，请写出打印出的 z 和 c 所有可能的值。（其中 x 为 P1、P2 的共享变量）

   - `z的值为-1或3；c的值为1或9。`

10. 何为系统调用？请简述系统调用与一般函数调用的区别。【201810】P62

    - 系统调用：系统调用是一群预先定义好的模块，它们提供一条管道让应用程序或一般用户能由此得到核心程序的服务。系统调用是系统程序与用户程序之间的接口。
    - 区别：
      - 1）系统调用运行在系统态（核心态），而一般函数运行在用户态。
      - 2）系统调用与一般函数调用的执行过程不同。系统调用执行时，当前进程被中断，由系统找相应的系统调用子程序，并在系统态下执行，执行结果返回进程。
      - 3）系统调用要进行“中断处理”，比一般函数调用多了一些系统开销。

11. 相比于进程，请简述线程在地址空间资源、通信关系、并发性及系统开销方面有哪些特点？【201804】 p83
    - 1）地址空间资源
      - 不同进程的地址空间是相互独立的，而同一进程中的各线程共享同一地址空间。
    - 2）通信关系
      - 进程之间的通信必须使用操作系统提供的进程间通信机制，而同一进程中的各线程间可以通过直接读或写全局变量来进行通信。
    - 3）并发性
      - 多进程之间可以并发执行，多线程之间也可以并发执行，而且同一进程中的多个线程之间也可以并发执行。
    - 4）系统开销
      - 创建进程或撤销进程的开销远大于线程的开销。

## 第 3 章 进程调度与死锁

1. 实时系统所采用的抢占式调度机制中，什么是基于时钟中断的抢占？与立即抢占相比，它的不足是什么？
2. 如果系统中有 m 个处理机，有 n 个周期性的硬实时进程，其中第 i 个进程的处理时间表示为 Ci，它的周期时间表示为 Pi。请回答：
   （1）需要满足怎样的条件才能使得这些实时进程得到及时处理（用公式表示）？
   （2）如果不能满足此条件，那么可以采取何种措施让这些实时进程得到及时处理？
3. 在采用最低松弛度优先算法的实时调度中，如果一个进程的完成截止时间为 T1，当前时间为 T2，该进程还需要 T3 时间来完成。
   （1）写出该进程的松弛度计算公式；
   （2）在系统中有一个就绪队列，如何对其中的进程进行排序？
4. 写出松弛度的概念及其公式，简述最低松弛度优先调度算法的实现方法。
5. 什么是死锁？系统发生死锁的原因是什么？
6. 什么是最早截止时间优先调度算法？试简述该调度算法的实现方法。
7. 什么是安全状态？写出用于避免死锁的银行家算法的过程。

## 第 4 章 内存管理

1. 请简述虚拟存储系统的 4 个主要特征。

   （1）离散性，即进程可以分散地存储在物理内存中。
   （2）多次性，指不必把进程一次性全部装入内存，可以将执行的代码和数据转入，其他等进程运行需要时再装入。
   （3）对换性，指内存中的进程可以换出，以腾出内存空间换入外存中的进程。
   （4）虚拟性，指系统为用户提供了比实际物理内存大的逻辑内存空间。

2. 请简述基于分页的虚拟存储系统所采用的 3 种页分配和置换策略。

   固定分配局部置换；可变分配全局置换；可变分配局部置换。

3. 列出虚拟存储技术带来的 3 点好处。

   （1）提高内存利用率；
   （2）提高多道程序度；
   （3）把逻辑地址空间和物理地址空间分开，使程序员不用关心物理内存的容量对编程的限制。

4. 操作系统为进程分配内存采用单一连续分配方式，简述此方式的内存分区情况、以及所适用的操作系统类型。

   内存分为系统区和用户区，系统区仅供操作系统使用，用户区供用户使用。此方式适用于单用户、单任务的操作系统。

5. 什么叫程序装入的重定位？从是否需要硬件支持，以及各自物理地址的计算方法角度比较静态重定位和动态重定位的区别。

   在程序装入时对目标程序中的指令和数据地址的修改过程称为重定位。
   静态重定位不需要硬件支持，而动态重定位需要硬件支持。
   静态重定位：物理地址=逻辑地址+程序在内存中的起始地址。
   动态重定位：物理地址=逻辑地址+重定位寄存器的值。

6. 采用虚拟存储管理方式的系统中，引起系统抖动的主要原因是什么？写出 2 种预防抖动的方法。

   引起系统抖动的主要原因：系统中进程数量太多,每个进程能分配的页框太少，以至于进程运行过程中频繁请求调页。
   预防抖动：
   （1）采取局部置换策略,即仅在进程自己的内存空间范围内置换页，不允许从其他进程获得。
   （2）在 CPU 调度程序中引入工作集算法。只有当每个进程在内存中有足够大的驻留集时，才能从外存中调入新的作业。
   （3）挂起若干进程。

7. 在采用段页式存储管理方式的系统中，为了获得一条指令或数据，需要 3 次访问内存。请按执行顺序分别写出 3 次访问的对象及获取的内容。

   第 1 次访问对象是内存中的段表，从中取得页表开始地址；
   第 2 次访问对象是内存中的页表，从中取出该页所在的物理块号，并将该块号与页内地址一起形成指令或数据的物理地址；
   第 3 次根据物理地址访问具体的内存地址，取出指令或数据。

8. 什么是程序执行的局部性原理？局部性原理表现在哪两个方面？

   （1）局部性原理是指在一段短的时间内，程序的执行仅局限于某个部分。相应地，它所访问的存储空间也局限于某个区域。
   （2）局部性表现为以下两个方面：
   时间局部性：如果程序中的某条指令一旦执行，则不久后该指令可能再次执行。
   空间局部性：一旦访问了某个单元，不久之后，其附近的存储单元也将被访问。

9. 引入虚拟存储技术的目的是什么？虚拟存储系统有哪些特征？

   （1）引入虚拟存储器主要是为了能从逻辑上对内存容量进行扩充。
   （2）虚拟存储器具有离散性、多次性、对换性和虚拟性。

10. 在内存管理中，分页管理和分段管理的主要区别是什么？

    （1）页是按物理单位划分的;而段是按逻辑单位划分的。
    （2）页的大小是固定的，而段的大小不固定。
    （3）分页的地址是一维的，而分段的地址空间是二维的。

## 第 5 章 文件系统

1. 简述树形目录的优点。
2. 假如某文件系统的目录结构采用 i 结点方式，一个 i 结点包括 13 个地址项，每个地址项有 32 位（4 个字节），用其中 10 个地址项存直接地址，1 个地址项存一次间接地址，1 个地址项存二次间接地址，1 个地址项存三次间接地址。试问当簇大小为 4KB 时，系统的 10 个直接地址项、一次间接地址项、二次间接地址项和三次间接地址项能管理的最大文件大小分别是多少？
3. 简述使用内存链接表分配的文件存储方式的实现方法，并写出访问过程。
4. 磁盘空间管理中，经常采用空闲簇链接表和位图两种方式跟踪记录空闲簇。简述它们的实现方法。
5. 简述连续分配文件存储方式的实现方法、优点和缺点。
6. 使用文件系统时，通常要进行 CLOSE 操作，这样做的目的是什么？
7. 磁盘空间管理中，请简单阐述记录空闲块的两种常用方法。
8. 文件的顺序存取和随机存取的主要区别是什么？
9. 文件系统为文件分配磁盘空间是以簇为单位的。簇的尺才太大或者太小都不合适。请问，簇的尺寸太大会有什么缺点？簇的尺寸太小会有什么缺点？
10. 磁盘文件系统可以使用磁盘链接表实现文件存储，也可以使用内存的链接表分配文件的存储空间。请论述它们在空间利用率和存取时间上的各自特点。
11. 某文件系统的 i 结点包括 12 个地址项，每个地址项存 64 位地址（8 个字节），其中 10 个地址项用来存直接地址，一个地址项存一次间接地址，一个地址项存二次间接地址，当簇大小为 4KB 时，请问，系统能管理的单个文件最大长度是多少？（请写出计算的中间步骤）

## 第 6 章 I/O 设备管理

1. 提高磁盘 I/O 速度的方法有哪些？
2. 试简述 SPOOLing 系统的主要作用。
3. 提前读是一种提高磁盘 I/O 速度的方法，请问该方法是如何实施的？为什么能提高磁盘 I/O 速度？
4. 设备分配通常有先来先服务和基于优先权的两种分配算法。简述它们的实现方法。
5. 磁盘访问时间由哪三部分组成？对这三部分做一个简单的说明。
6. 什么是设备独立性，引入设备独立性的好处有哪些？
7. 简述 SPOOLing 系统的组成。
8. 操作系统中设备管理软件的功能，除了实现 I/O 设备的独立性和错误处理外，其它功能还有哪些？
9. 当用户进程请求 I/O 服务，请简述该 I/O 中断的处理过程。
10. 磁盘的访问时间由哪几部分组成？其中花费时间最长的是哪个？
11. 请简述 SPOOLing 系统的优点。
