## 2.1 进程的描述

1. 程序的并发执行

   - 1.程序的顺序执行
     - 特点：1.顺序性；2.封闭性；3.可再现性
   - 2.程序的并发执行
     - 特点：1.间断性；2.失去封闭性；3.不可再现性

2. 进程的概念

   - 1.进程的定义

     - 定义 1：进程是允许并发执行的程序在某个数据集合上的`运行过程`
     - 定义 2：进程是由正文段、用户数据段及进程控制块共同组成的`执行环境`

   - 2.进程的特征
     - 1）并发；2）动态；3）独立；4）异步；5）结构特征
   - 3.进程与程序的比较
     - 进程是程序的一次执行，进程总是对应至少一个特定的程序，执行程序的代码。

3. 进程控制块

   - 1.什么是进程控制块

     - 进程控制块是进程实体的一部分，是操作系统中最重要的数据结构。进程控制块中记录了操作系统所需要的、用于描述进程情况及控制进程运行所需的全部信息。

   - 2.进程控制块中的信息

     - 1）进程标识符信息；2）处理机状态信息；3）进程调度信息；4）进程控制信息

4. 进程的状态

   - 1.进程的 3 种基本状态

     - 就绪态
     - 执行态
     - 阻塞态

   - 2.进程状态的转换

     - 唤醒过程：进程状态由阻塞态变为就绪态的过程
     - 阻塞过程：由执行态变为阻塞态的过程

   - 3.Linux 的进程状态

5. 进程的组织
   - 1.链接方式
   - 2.索引方式
   - 3.进程队列

## 2.2 进程的控制

1. 进程的创建

   - 创建新进程包括为进程分配必要的资源，建立操作系统用于管理进程的数据结构等操作。

2. 进程的阻塞
3. 进程的唤醒
4. 进程的终止
5. 操作系统的启动和系统中进程的出现

## 2.3 操作系统内核

- 操作系统内核的功能：1.支撑功能；2.资源管理功能。
- 操作系统是计算机硬件的第一次扩充，内核执行操作系统与硬件关系密切，执行频率高的模块，常住内存。操作系统内核的功能：1.支撑功能；2.资源管理功能。
  - 支撑功能：包括中断处理、时钟管理、原语操作（原子操作）
  - 资源管理功能：包括进程管理、存储管理、设备管理

1. 中断
2. 时钟管理
3. 系统调用

## 2.4 进程同步

1. 进程同步的基本概念
2. 同步机制应遵循的准则
3. 信号量机制
4. 经典的进程同步问题
5. 管程

## 2.5 进程通信

1. 共享存储器系统
2. 消息传递系统
3. 管道通信
4. 消息缓冲队列

## 2.6 线程

1. 线程的描述
2. 线程的控制
3. 线程的同步
4. 线程通信

## 思考与练习题

### 填空题

1. 进程是由正文段、` `和` `构成的实体。
2. 进程的 3 种基本状态是执行态、` `和` `。
3. 整型信号量的值只能被` `和` `改变，不允许系统中的其他程序改变信号量的值。
4. 临界区是指访问` `的代码。

### 简答题

1. 什么是进程？说明进程与程序的区别和联系。
2. 操作系统在什么时候创建进程？操作系统如何创建一个进程？
3. 时钟中断信号是如何产生的？时钟中断处理程序（时钟驱动程序）的功能是什么？
4. 请说明单重中断的处理过程。
5. 进程具有哪些特征？
6. 什么是线程？为什么要引入线程？
7. 实现进程互斥的基本原理是什么？

### 综合应用

1. 有两个进程 pA、pB 合作解决文件打印问题：pA 将文件记录从磁盘读入主存的缓存区，每执行一次读一个记录；pB 将缓冲区的内容打印出来，每执行一次打印一个记录。缓冲区的大小等于一个记录大小。请用记录型信号量机制的 wait(s)和 signal(s)操作来保证文件的正确打印，并写出同步代码。

## 百日题库-简答题

- 【2018 年 4 月】相比于进程，请简述线程在地址空间资源、通信关系、并发性及系统开销方面有哪些特点？

  - （1）地址空间资源上，不同进程的地址空间是互相独立的，而同一进程中的各线程共享同地址空间。
    （2）通信关系上，进程之间的通信必须使用操作系统提供的进程间通信机制，而同一进程中的各线程间可以通过直接读写全局变量来通信。
    （3）在并发性上，多个进程和多个进程之间均可并发执行，而同一进程中多个线程之间可以并发执行。
    （4）在系统开销上，相比进程而言，线程在创建、撤销及上下文切换时系统开销很小，且速度更快。

- 【2018 年 10 月】何为系统调用？请简述系统调用与一般函数调用的区别。

  - 系统调用是一组预先定义好的模块，是系统程序与用户程序之间的接口，通过该接口可以得到操作系统内核（或核心程序）的服务。
    系统调用与一般函数调用的区别如下：
    （1）系统调用运行在系统态，而一般函数调用运行在用户态。
    （2）系统调用与一般函数调用的执行过程不同。系统调用执行时，当前进程被中断，由系统找相应的系统调用子程序，并在系统态下执行，执行结果返回调用进程。
    （3）系统调用要进行中断处理，比一般函数调用的系统开销要大。

- 【2019 年 4 月】有两个并发进程 P1、P2，其程序代码如下：  
  ![image](https://sdjrzk-1251357229.cos.ap-guangzhou.myqcloud.com/exam/paper/607/images/4781.png)  
  如果上述每行代码都具有原子性，请写出打印出的 z 和 c 所有可能的值。（其中 x 为 P1、P2 的共享变量）

  - z 的值为-1 或 3；c 的值为 1 或 9。

- 【2019 年 10 月】简述同步机制应遵循的原则。

  - 准则包括：空闲让进、忙则等待、有限等待和让权等待

- 【2020 年 8 月】请简述内核级线程与用户级线程在线程调度、切换速度、系统调用、执行时间分配四个方面的区别。

  - （1）线程调度上：内核级线程的调度由内核的线程调度程序完成，用户级线程的调度则由用户线程包中一个过程来完成。
    （2）切换速度上：内核级线程切换慢，用户级线程切换快。
    （3）系统调用上：内核级线程进行系统调用，只阻塞该线程。用户级线程的系统调用，要阻塞线程所属的进程。
    （4）执行时间分配上：内核级线程的 CPU 时间以线程为单位分配，每一个线程都可以独享一个 CPU 时间片。用户级线程的 CPU 时间以进程为单位，同一个进程的多个线程共享一个 CPU 时间片。

- 【2020 年 10 月】列出线程控制的四项基本操作功能。

  - 线程创建、线程的终止、线程的调度与切换、线程的阻塞与唤醒。

- 【2021 年 4 月】从系统开销的角度论述线程与进程在创建或撤销、上下文切换时的处理区别。

  - 创建或撤消进程时，系统都要为之分配或者回收资源，其开销远大于创建或撤销线程时的开销。进程上下文切换时，需要保存当前进程的所有 CPU 环境，并设置新进程的 CPU 环境；而线程下文切换时，只需要保存和设置几个寄存器内容，开销很小。同一进程内的线程共享进程的地址空间，切换更快。

- 【2021 年 10 月】除了 I/O 设备被启动时会引起中断之外，还有哪四种原因会引起中断？

  - （1）人为设置中断；（2）程序性事故；（3）硬件故障；（4）外部事件。

- 【2022 年 4 月】程序的并发执行，有哪三个特点？为了对共享资源进行管理，操作系统引入了什么机制？
  - （1）间断性，失去封闭性，不可再现性。（2）引入了信号量机制。
