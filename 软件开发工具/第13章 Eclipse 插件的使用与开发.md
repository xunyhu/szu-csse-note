## （一）插件简介

1. 插件

   如果说 Eclipse 是一幅大拼图，那么插件就像是拼图中的每一小片，它是 Eclipse 的`最小扩展单元`。插件之间互相连接的边界称为`扩展点`，它为插件提供连接到另一个插件上的接口。

   插件是一种`遵循其所依附的软件的接口规范`所编写出来的**程序**。

   每个插件都是由一个`插件清单文件（plugin.xml）`和一些`可选文件`组成。插件清单文件描述了插件的名字、版本号、使用的或者本身定义的扩展点等信息。

   一个典型的插件文件夹中一般包括以下文件。  
   （1） plugin.xml：插件清单文件，主要有 plugin、runtime、requires 和 extension 四个标签。其中最重要的是 id，它要求不能和现有的 Eclipse 插件 id 有冲突。  
   （2）plugin.properties: 插件的一般信息，记录插件的属性设置。  
   （3） about.html：记录证书信息。  
   （4）\*．Jar：插件需要的类文件。  
   （5）lib：容纳第三方 JAR 包。  
   （6）icons：容纳 icon 文件，通常是 GIF 格式。  
   （7） 其他需要的文件：Eclipse 在`首次启动`时，会`扫描并查找` plugins 目录下的已`被定义的插件`。

   如果发现某个插件有多个版本，只有一个（通常是`高版本号`）将被使用。这一惰性导入机制对于基于上百个插件的 Eclipse 系统是非常重要的。

## （二）使用 PDE 进行插件开发

1. PDE 简介

   随着插件功能的不断发展，插件清单文件可能会有上百行，开发者需要自己来协调不同插件的命名和属性设置等问题，所以`插件开发环境（Plugin Development Environment-PDE）`就应运而生。

   PDE 新增了透视图来帮助开发者创建、开发、测试、调试和部署插件。

   PDE 还包括开发片段、功能部件和更新站点的工具，协助开发者完成插件开发的全过程。

2. PDE 基本操作

   单击“窗口”，选择“打开透视图”，选择“其他”。从列表中选择“插件开发”，单击“确定”，打开 PDE 透视图。

   PDE 透视图包括`清单编辑器`和`插件大纲`两部分。

3. 清单编辑器

   清单编辑器主要由六个页面组成。

   （1）概述页面：由“一般信息”和“执行环境”两部分组成。它们定义了重要的插件属性。  
   （2）依赖性页面。该页面指定了当前插件运行时所需的插件列表。PDE 的重要任务是要准确地反映运行时的类路径，以保证插件开发运行的确性。一旦保存了清单文件，PDE 会自动更新项目的类路径，反映依赖性的变化。  
   （3）运行时页面。该页面显示插件提供给其他插件使用的所有包，以及插件运行时类路径中的库和文件夹。  
   （4）扩展页面。该页面从总体上显示了当前插件可用的扩展点。  
   （5）扩展点页面。在扩展点页面中，可以指定当前插件为其他插件提供的扩展点。我们需要指定扩展点的三个值：1）扩展点标识；2）扩展点名称；3）扩展点模式。  
   （6）构建页面。该页面包含构建、打包和导出插件时所需的所有信息。

4. 插件模板

   PDE 为平台的常用扩展点提供了复杂性和功能均有所不同的模板。每个模板都可生成功能全面的插件。

## （三）常用插件扩展点

1. 常用插件扩展点

   在 Eclipse 中，常用的扩展点很多，本节选取 Eclipse 用户界面的三个基本构成元素：`视图、编辑器和透视图`的扩展点进行介绍。

2. 视图扩展点

   当用户选择工作台中的不同对象时，就有相应的视图来显示所选择的内容。

   在 Eclipse 中，`同一时间只能显示一个编辑器，但是可以显示多个视图，这是视图和编辑器最显著的区别`。

   org.eclipse.ui.`views`

   视图的位置是持久保存的，当关闭视图时会保存该位置，而在单个会话中重新打开视图时就会恢复它。

3. 编辑器扩展点

   编辑器扩展点也是工作台的一个重要组成部分。

   org.eclipse.ui.`editors`

4. 透视图扩展点

   透视图就是将已有的视图、操作集及编辑器进行组合和布局。

   org.eclipse.ui.`perspective`

## （四）常用插件介绍与使用

1.  常用插件介绍
2.  EMF 插件

    EMF 是 Eclipse 的建模框架。  
    使用 EMF 可以实现以下四个功能：  
    代码生成、输入、默认的持久化机制、模型编辑器

3.  Visual Editor 插件

    Visual Editor 项目的目标是构建一个用于构建工具的工具，允许使用者通过一个完全的所见即所得的图形化编辑器来创建 SWT/AWT/Swing 应用程序。

    Eclipse 中 Visual Editor 采用最常见的工具是图形化编辑框架 GEF。
