## （一）安装 GDB

1. 程序调试

   `程序调试`指编写的程序`投入实际运行前`，通过调试工具或手工方法进行测试，`修正语法错误`和`逻辑错误`的过程。`它是程序设计过程中必不可少的步骤，其重要性甚至超过学习一门语言`。

2. GDB 简介

   `GDB是GNU开源组织发布`的一个强大的 UNIX(不仅限于 UNIX)下的`C/C++程序调试工具`。它`搭配MinGW使用`，可以使用户完成整个 C/C++程序的编译和运行工作。有了 GDB，用户可以在调试本地的 C 程序时不需要第三方的 C/C++工具。

   一般来说，GDB 可以帮助用户实现如下功能：

   （1）可以按照用户的自定义要求`运行和暂停`程序；

   （2）可让被调试的程序在用户所`指定的调试的断点处停住`；

   （3）当程序被停住时，用户可以`检查`此时引起程序中断的原因；

   （4）`动态地改变程序的执行环境`；

   （5）`单步调试程序`，在每个断点显示程序中各个变量的状态和值。

3. 安装 GDB

   本书使用的 GDB 版本为 GDB-7.0。

   打开浏览器，输入下载地址，选择上方的`Files标签`，进入下一步选择版本下载，要注意选择`bin文件`，而不是 src 文件进行下载。

   将`gdb.exe文件`解压到`MinGW安装目录下的bin文件夹`中即可完成安装。

## （二）调试 C 程序

1. CDT 调试器

   Eclipse CDT 调试器允许用户使用设置`断点、暂停、单步执行代码`等方法来控制程序的运行过程。

   另外，CDT 调试器`允许用户调试网络上其他机器中运行的程序（远程调试）`。

   Eclipse 运行用户`自定义调试视图`，单击菜单栏的窗口菜单，选择`首选项`，可`设置调试视图相关属性`。

2. 断点

   断点可以使程序在运行到`断点位置`时`自动暂停`并且显示`程序`当前的状态。

   用户可以在编辑器或断点视图中`添加或删除`断点，而断点视图会清楚地显示每个断点的状态，`激活状态的断点会以蓝色的圆圈显示`；`非激活状态`的断点则是以`白色透明圆圈`显示。

3. 断点分类

   断点包括`行断点`、`方法断点`和`事件断点`。

4. **行断点的添加、删除、激活与禁用方式**

   - 添加行断点的两种方式：

     （1）鼠标右键单击后，选择 Toggle Breakpoint（见图）。

     （2）用双击的方法添加

   - 删除行断点的三种方式：

     （1）在编辑器左侧边缘的标记区域，双击需要删除的行断点。

     （2）用鼠标右键单击需要删除的行断点，弹出如图 10-12 所示的菜单，选择 Toggle Breakpoint。

     （3）激活断点视图，选中需要删除的行断点，单击工具栏中的删除选中断点（Remove Selected Breakpoints）。

   - 禁用行断点：Disable Breakpoint 或者在断点视图中把勾去掉。
   - 激活行断点：Enable Breakpoint 或者在断点视图中打勾。

5. 方法断点

   Eclipse 支持方法断点，就是对某个方法或函数设置断点，在程序运行到该方法的`第一行`时自动暂停。

   方法断点显示在断点视图中，用`蓝色箭头加圆圈图标`显示。

   方法断点的添加、删除、激活与禁用方式与行断点类似，同样有三种方法：分别是`双击、鼠标右键弹出菜单、在断点视图中删除`。

   方法断点的激活或禁用同样有两种方法，分别是鼠标光标移动到编辑器左侧标记区域，在激活视图操作。

6. 事件断点

   事件断点是在程序运行过程中发生特定事件时（如`异常触发、线程启动、线程退出、系统调用等`）将程序暂停。

   程序运行过程中会发生多种类型的事件，包括程序运行过程时的事件，`如进程和线程的开始、暂停和退出、库文件的读取；异常事件，如抛出异常、捕获异常`。

7. 调试 C 程序

   单击菜单栏中的`运行(Run)`菜单，选择`(Debug Configurations)选项`。在 Debug Configurations 窗口左侧单击 New launch configuration，新建一个调试配置。在名称(Name)中输入调试的名字，在 Main 选项卡的 Project 选项中选定被调试的项目。

8. 调试透视图

   调试透视图主要包括：

   （1）`调试视图`：显示当前调试的程序线程和其所处的状态；

   （2）`变量视图`：显示整个调试过程中程序`变量值的变化情况`，该视图是帮助程序员查错和纠错主要手段。

   （3）断点视图

   （4）编辑器

   （5）大纲视图

   （6）控制台视图

9. 单步调试

   单步遍历程序可以让用户逐行地运行整个程序，包括：

   `单步跳入：F5 快捷键`

   `单步跳过：F6 快捷键`

   `单步返回：F7 快捷键`

   `中断调试的快捷键：Ctrl+F2。`
